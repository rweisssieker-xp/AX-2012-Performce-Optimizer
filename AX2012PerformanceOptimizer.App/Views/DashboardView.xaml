<Page
    x:Class="AX2012PerformanceOptimizer.App.Views.DashboardView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock Text="Dashboard" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock Text="System health overview and key metrics" 
                      Style="{StaticResource BodyTextBlockStyle}" 
                      Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                      Margin="0,8,0,0"/>
        </StackPanel>

        <!-- Content -->
        <ScrollViewer Grid.Row="1">
            <StackPanel Spacing="16">
                <!-- Status Bar -->
                <InfoBar IsOpen="True" Severity="Informational" Message="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"/>

                <!-- Metrics Cards -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Active Users Card -->
                    <Border Grid.Column="0" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                           CornerRadius="8" Padding="20" Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="Active Users" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="{x:Bind ViewModel.ActiveUsers, Mode=OneWay}" 
                                      Style="{StaticResource HeaderTextBlockStyle}" 
                                      Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Running Batch Jobs Card -->
                    <Border Grid.Column="1" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                           CornerRadius="8" Padding="20" Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="Running Batch Jobs" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="{x:Bind ViewModel.RunningBatchJobs, Mode=OneWay}" 
                                      Style="{StaticResource HeaderTextBlockStyle}" 
                                      Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Database Size Card -->
                    <Border Grid.Column="2" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                           CornerRadius="8" Padding="20" Margin="0,0,8,0">
                        <StackPanel>
                            <TextBlock Text="Database Size (MB)" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="{x:Bind ViewModel.DatabaseSizeMB, Mode=OneWay}" 
                                      Style="{StaticResource HeaderTextBlockStyle}" 
                                      Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Expensive Queries Card -->
                    <Border Grid.Column="3" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                           CornerRadius="8" Padding="20">
                        <StackPanel>
                            <TextBlock Text="Expensive Queries" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                            <TextBlock Text="{x:Bind ViewModel.ExpensiveQueries, Mode=OneWay}" 
                                      Style="{StaticResource HeaderTextBlockStyle}" 
                                      Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Action Buttons -->
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button Content="Load Data" Command="{x:Bind ViewModel.LoadDataCommand}">
                        <Button.Icon>
                            <FontIcon Glyph="&#xE72C;"/>
                        </Button.Icon>
                    </Button>
                    <Button Content="Refresh" Command="{x:Bind ViewModel.RefreshCommand}">
                        <Button.Icon>
                            <FontIcon Glyph="&#xE72C;"/>
                        </Button.Icon>
                    </Button>
                </StackPanel>

                <!-- Loading Indicator -->
                <ProgressRing IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}" 
                             Width="50" Height="50"
                             Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay}"/>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>

